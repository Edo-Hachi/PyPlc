# PyPlc Ver3 - PLCæ¨™æº–æº–æ‹ ãƒ©ãƒ€ãƒ¼å›³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼

[![Version](https://img.shields.io/badge/Version-3.0-green)]() 
[![Python](https://img.shields.io/badge/Python-3.8+-blue)]() 
[![Pyxel](https://img.shields.io/badge/Pyxel-1.9.0+-red)]()
[![Quality](https://img.shields.io/badge/Code_Quality-A+-gold)]()

**ğŸŒ [English Version](#english-version) | æ—¥æœ¬èªç‰ˆ**

<img src="./GitResource/ScrnShot001.png">

## æ¦‚è¦

PyPlc Ver3ã¯ã€å·¥å ´æ¤œè¨¼ç”¨é€”ã¨æ•™è‚²ç›®çš„ã‚’å…¼ã­ãŸPLCæ¨™æº–æº–æ‹ ã®ãƒ©ãƒ€ãƒ¼å›³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚
å®Ÿéš›ã®PLCãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨åŒç­‰ã®æ“ä½œæ„Ÿã‚’æä¾›ã—ã€æ¥ç‚¹ãƒ»ã‚³ã‚¤ãƒ«ãƒ»ã‚¿ã‚¤ãƒãƒ¼ãƒ»ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ã‚¹ã‚¿ç­‰ã®åŸºæœ¬æ©Ÿèƒ½ã‚’å®Œå…¨å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

**ğŸ† é«˜å“è³ªã‚³ãƒ¼ãƒ‰**: WindSurf AI Assistantã«ã‚ˆã‚‹A+è©•ä¾¡ï¼ˆå•†ç”¨è£½å“ãƒ¬ãƒ™ãƒ«ï¼‰ã‚’ç²å¾—æ¸ˆã¿

## ä¸»è¦æ©Ÿèƒ½

### âœ… å®Œå…¨å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½
- **åŸºæœ¬ãƒ‡ãƒã‚¤ã‚¹**: A/Bæ¥ç‚¹ã€é€šå¸¸/åè»¢ã‚³ã‚¤ãƒ«ã€é…ç·šç³»ï¼ˆæ°´å¹³ãƒ»å‚ç›´ãƒ»åˆ†å²ï¼‰
- **é«˜åº¦æ©Ÿèƒ½**: ã‚¿ã‚¤ãƒãƒ¼ï¼ˆTONï¼‰ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ï¼ˆCTUï¼‰ã€RST/ZRSTå‘½ä»¤
- **ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ã‚¹ã‚¿ï¼ˆMOV/ADD/SUB/MUL/DIVæ“ä½œï¼‰
- **UI/UX**: ãƒ‡ãƒã‚¤ã‚¹ãƒ‘ãƒ¬ãƒƒãƒˆã€å³ã‚¯ãƒªãƒƒã‚¯ç·¨é›†ã€ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜/èª­ã¿è¾¼ã¿
- **å›è·¯è§£æ**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é›»åŠ›ãƒ•ãƒ­ãƒ¼è§£æã€30FPSé«˜é€Ÿå‹•ä½œ
- **æ•™è‚²æ”¯æ´**: PLCæ¨™æº–ã‚¢ãƒ‰ãƒ¬ã‚¹ä½“ç³»ã€åŒä¸€ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º

### ğŸ¯ ç‰¹å¾´
- **PLCæ¨™æº–å®Œå…¨æº–æ‹ **: ä¸‰è±PLCæº–æ‹ ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ä½“ç³»ãƒ»å‹•ä½œä»•æ§˜
- **æ•™è‚²çš„ä¾¡å€¤**: å®ŸPLCç§»è¡Œæ™‚ã®é•å’Œæ„Ÿãªã—
- **å•†ç”¨å“è³ª**: WindSurf A+è©•ä¾¡ã®é«˜å“è³ªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ**: è²¬ä»»åˆ†é›¢åŸå‰‡ã«åŸºã¥ãã‚¯ãƒªãƒ¼ãƒ³å®Ÿè£…
- **JSONãƒ™ãƒ¼ã‚¹ãƒ€ã‚¤ã‚¢ãƒ­ã‚°**: é«˜åº¦ãªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å®Ÿè¡Œ

### å¿…è¦ç’°å¢ƒ
- Python 3.8ä»¥ä¸Š
- Pyxel 1.9.0ä»¥ä¸Š
- å¯¾å¿œOS: Windows/Linux/macOS

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install pyxel

# ã¾ãŸã¯é€šå¸¸å®Ÿè¡Œ
pyxel run main.py
```

## åŸºæœ¬æ“ä½œ

### ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
- **TAB**: EDIT/RUNãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
- **F5**: PLCå®Ÿè¡Œé–‹å§‹/åœæ­¢ï¼ˆRUNãƒ¢ãƒ¼ãƒ‰ã®ã¿ï¼‰
- **F6**: å…¨ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚»ãƒƒãƒˆ
- **F12**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†

### ãƒ‡ãƒã‚¤ã‚¹é…ç½®ãƒ»ç·¨é›†
- **1-0ã‚­ãƒ¼**: ãƒ‡ãƒã‚¤ã‚¹é¸æŠï¼ˆãƒ‡ãƒã‚¤ã‚¹ãƒ‘ãƒ¬ãƒƒãƒˆï¼‰
- **Shift+æ•°å­—**: ä¸‹æ®µãƒ‡ãƒã‚¤ã‚¹é¸æŠ
- **ãƒã‚¦ã‚¹å·¦ã‚¯ãƒªãƒƒã‚¯**: ãƒ‡ãƒã‚¤ã‚¹é…ç½®/å‰Šé™¤
- **ãƒã‚¦ã‚¹å³ã‚¯ãƒªãƒƒã‚¯**: ãƒ‡ãƒã‚¤ã‚¹IDãƒ»è¨­å®šç·¨é›†
- **ãƒ‰ãƒ©ãƒƒã‚°**: LINK_HORZï¼ˆæ°´å¹³é…ç·šï¼‰ã®é€£ç¶šé…ç½®

### ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
- **Ctrl+S**: å›è·¯ä¿å­˜ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- **Ctrl+O**: å›è·¯èª­ã¿è¾¼ã¿ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- **CSVå½¢å¼**: å›è·¯ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜/èª­ã¿è¾¼ã¿

### ãƒ‡ãƒã‚¤ã‚¹æ“ä½œï¼ˆRUNãƒ¢ãƒ¼ãƒ‰ï¼‰
- **ãƒã‚¦ã‚¹å³ã‚¯ãƒªãƒƒã‚¯**: æ¥ç‚¹ã®ON/OFFåˆ‡ã‚Šæ›¿ãˆ

## ãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§

### åŸºæœ¬ãƒ‡ãƒã‚¤ã‚¹ï¼ˆä¸Šæ®µï¼šé€šå¸¸é¸æŠï¼‰
| ã‚­ãƒ¼ | ãƒ‡ãƒã‚¤ã‚¹ | èª¬æ˜ | è¡¨è¨˜ |
|------|----------|------|------|
| 1 | Aæ¥ç‚¹ | ãƒãƒ¼ãƒãƒ«ã‚ªãƒ¼ãƒ—ãƒ³æ¥ç‚¹ | -\|â”œ\|- |
| 2 | Bæ¥ç‚¹ | ãƒãƒ¼ãƒãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºæ¥ç‚¹ | -\|/\|- |
| 3 | é€šå¸¸ã‚³ã‚¤ãƒ« | å‡ºåŠ›ã‚³ã‚¤ãƒ« | -( )- |
| 4 | åè»¢ã‚³ã‚¤ãƒ« | åè»¢å‡ºåŠ›ã‚³ã‚¤ãƒ« | -(/)- |
| 5 | æ°´å¹³é…ç·š | æ°´å¹³æ¥ç¶š | â”€â”€â”€â”€ |
| 6 | ä¸‹æ–¹åˆ†å² | ä¸‹æ–¹å‘åˆ†å² | â”¬ |
| 7 | ä¸Šæ–¹åˆ†å² | ä¸Šæ–¹å‘åˆ†å² | â”´ |
| 8 | å‚ç›´é…ç·š | å‚ç›´æ¥ç¶š | \| |
| 0 | å‰Šé™¤ | ãƒ‡ãƒã‚¤ã‚¹é™¤å» | ï¼ |

### é«˜åº¦ãƒ‡ãƒã‚¤ã‚¹ï¼ˆä¸‹æ®µï¼šShift+æ•°å­—ï¼‰
| ã‚­ãƒ¼ | ãƒ‡ãƒã‚¤ã‚¹ | èª¬æ˜ |
|------|----------|------|
| Shift+1 | ã‚¿ã‚¤ãƒãƒ¼ | TONï¼ˆã‚ªãƒ³ãƒ‡ã‚£ãƒ¬ã‚¤ã‚¿ã‚¤ãƒãƒ¼ï¼‰ |
| Shift+2 | ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ | CTUï¼ˆã‚¢ãƒƒãƒ—ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ï¼‰ |
| Shift+3 | RSTå‘½ä»¤ | ãƒªã‚»ãƒƒãƒˆå‘½ä»¤ |
| Shift+4 | ZRSTå‘½ä»¤ | ç¯„å›²ãƒªã‚»ãƒƒãƒˆå‘½ä»¤ |
| Shift+5 | ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ã‚¹ã‚¿ | ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‡ãƒã‚¤ã‚¹ |

## PLCæ¨™æº–ã‚¢ãƒ‰ãƒ¬ã‚¹ä½“ç³»

### å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹ (X)
- **ç¯„å›²**: X000-X377ï¼ˆ8é€²æ•°ï¼‰
- **ç”¨é€”**: ç‰©ç†çš„ãªå…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹ï¼ˆã‚¹ã‚¤ãƒƒãƒã€ã‚»ãƒ³ã‚µãƒ¼ç­‰ï¼‰

### å‡ºåŠ›ãƒ‡ãƒã‚¤ã‚¹ (Y)  
- **ç¯„å›²**: Y000-Y377ï¼ˆ8é€²æ•°ï¼‰
- **ç”¨é€”**: ç‰©ç†çš„ãªå‡ºåŠ›ãƒ‡ãƒã‚¤ã‚¹ï¼ˆãƒ©ãƒ³ãƒ—ã€ãƒªãƒ¬ãƒ¼ç­‰ï¼‰

### å†…éƒ¨ãƒªãƒ¬ãƒ¼ (M)
- **ç¯„å›²**: M0-M7999ï¼ˆ10é€²æ•°ï¼‰
- **ç”¨é€”**: ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…éƒ¨ã§ä½¿ç”¨ã™ã‚‹è£œåŠ©ãƒªãƒ¬ãƒ¼

### ã‚¿ã‚¤ãƒãƒ¼ (T)
- **ç¯„å›²**: T000-T255ï¼ˆ10é€²æ•°ï¼‰
- **ãƒ—ãƒªã‚»ãƒƒãƒˆå€¤**: 0-32767ï¼ˆ0.1ç§’å˜ä½ï¼‰
- **å‹•ä½œ**: TONï¼ˆã‚ªãƒ³ãƒ‡ã‚£ãƒ¬ã‚¤ã‚¿ã‚¤ãƒãƒ¼ï¼‰

### ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ (C)
- **ç¯„å›²**: C000-C255ï¼ˆ10é€²æ•°ï¼‰
- **ãƒ—ãƒªã‚»ãƒƒãƒˆå€¤**: 0-65535ï¼ˆå›æ•°ï¼‰
- **å‹•ä½œ**: CTUï¼ˆã‚¢ãƒƒãƒ—ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ã‚¹ã‚¿ (D)
- **ç¯„å›²**: D0-D7999ï¼ˆ10é€²æ•°ï¼‰
- **æ“ä½œ**: MOV/ADD/SUB/MUL/DIV
- **ç”¨é€”**: æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã®ä¿æŒãƒ»æ¼”ç®—

## æŠ€è¡“ä»•æ§˜

### è¡¨ç¤ºãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **è§£åƒåº¦**: 384Ã—384ãƒ”ã‚¯ã‚»ãƒ«
- **ã‚°ãƒªãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ **: 15è¡ŒÃ—20åˆ—
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ**: 30FPSå®‰å®šå‹•ä½œ
- **å›è·¯è§£æ**: æ·±åº¦å„ªå…ˆæ¢ç´¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **è¨­è¨ˆæ€æƒ³**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã€è²¬ä»»åˆ†é›¢åŸå‰‡
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: WindSurf A+è©•ä¾¡ï¼ˆå•†ç”¨è£½å“ãƒ¬ãƒ™ãƒ«ï¼‰
- **ä¿å®ˆæ€§**: æ‹¡å¼µå®¹æ˜“ãªè¨­è¨ˆã€åŒ…æ‹¬çš„ã‚³ãƒ¡ãƒ³ãƒˆ
- **äº’æ›æ€§**: PLCæ¨™æº–æº–æ‹ ã€å®Ÿæ©Ÿç§»è¡Œå¯¾å¿œ

### ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- **JSONãƒ™ãƒ¼ã‚¹**: è¨­å®šå¯èƒ½ãªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…¥åŠ›æ¤œè¨¼
- **ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ**: é«˜åº¦ãªãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜/èª­ã¿è¾¼ã¿æ©Ÿèƒ½

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
PyPlc/
â”œâ”€â”€ main.py                      # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ config.py                    # è¨­å®šå®šæ•°ï¼ˆãƒ‡ãƒã‚¤ã‚¹ç¨®åˆ¥ã€UIè¨­å®šç­‰ï¼‰
â”œâ”€â”€ core/                        # ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ circuit_analyzer.py      # å›è·¯è§£æã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ grid_system.py           # ã‚°ãƒªãƒƒãƒ‰ç®¡ç†ãƒ»ãƒ‡ãƒã‚¤ã‚¹æç”»
â”‚   â”œâ”€â”€ device_base.py           # PLCãƒ‡ãƒã‚¤ã‚¹åŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ device_palette.py        # ãƒ‡ãƒã‚¤ã‚¹é¸æŠãƒ‘ãƒ¬ãƒƒãƒˆ
â”‚   â”œâ”€â”€ input_handler.py         # ãƒã‚¦ã‚¹ãƒ»ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›å‡¦ç†
â”‚   â”œâ”€â”€ circuit_csv_manager.py   # CSVä¿å­˜/èª­ã¿è¾¼ã¿æ©Ÿèƒ½
â”‚   â””â”€â”€ SpriteManager.py         # ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
â”œâ”€â”€ pyDialogManager/             # é«˜åº¦ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ dialog_manager.py        # ãƒ€ã‚¤ã‚¢ãƒ­ã‚°çµ±åˆç®¡ç†
â”‚   â”œâ”€â”€ dialog_system.py         # ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ æ ¸
â”‚   â”œâ”€â”€ widgets.py               # UIåŸºæœ¬ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
â”‚   â”œâ”€â”€ file_open_dialog.py      # ãƒ•ã‚¡ã‚¤ãƒ«é–‹ããƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”œâ”€â”€ file_save_dialog.py      # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”œâ”€â”€ device_id_dialog_controller.py  # ãƒ‡ãƒã‚¤ã‚¹IDç·¨é›†
â”‚   â”œâ”€â”€ timer_counter_dialog_controller.py  # ã‚¿ã‚¤ãƒãƒ¼ãƒ»ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®š
â”‚   â”œâ”€â”€ data_register_dialog_controller.py  # ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ã‚¹ã‚¿è¨­å®š
â”‚   â””â”€â”€ dialogs.json             # ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ sprites.json                 # ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆå®šç¾©
â”œâ”€â”€ my_resource.pyxres           # Pyxelãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«

#pyDialogManagerã¯æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã®æ´¾ç”Ÿãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã€ç¾åœ¨ã¯ç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒªã¨ãªã£ã¦ã„ã‚‹
https://github.com/Edo-Hachi/pyDialogManager

## é–‹ç™ºå±¥æ­´ã¨æˆæœ

### Ver3ã®ä¸»è¦æˆæœï¼ˆ2025å¹´ï¼‰
- **Phase 1-5**: åŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ ï½ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: è²¬ä»»åˆ†é›¢è¨­è¨ˆãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ãƒ»é«˜å“è³ªã‚³ãƒ¼ãƒ‰å®Ÿç¾
- **PLCæº–æ‹ **: ä¸‰è±GxWorksã‚’åŸºæº–ã¨ã—ã¦æ•™è‚²ã«ã¤ã‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
- **æ•™è‚²ä¾¡å€¤**: å®Ÿç”¨PLCã¨ã®å®Œå…¨äº’æ›å‹•ä½œã‚’ã‚ã–ã™
- **æŠ€è¡“é©æ–°**: LINK_BRANCHå‚ç›´æ¥ç¶šã‚·ã‚¹ãƒ†ãƒ ï¼ˆ125è¡Œâ†’15è¡Œã«å‰Šæ¸›ï¼‰

### å“è³ªä¿è¨¼
- **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼**: WindSurf,Cursor,ClaudeCode,GeminiCLIè©•ä¾¡
- **è¨­è¨ˆå“è³ª**: ã€Œå•†ç”¨è£½å“ãƒ¬ãƒ™ãƒ«ã®å®Œæˆåº¦ã€è©•ä¾¡
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: 0.11mså¹³å‡å®Ÿè¡Œæ™‚é–“ï¼ˆ30FPSè¦ä»¶ã®300å€é«˜é€Ÿï¼‰
- **æ•™è‚²åŠ¹æœ**: ã€Œå®ŸPLCæº–æ‹ ã®ç´”ç²‹å®Ÿè£…ã€è©•ä¾¡

### Ver1/Ver2ã‹ã‚‰ã®é€²åŒ–
- **Ver1**: ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆå†…éƒ¨ãƒ‡ãƒ¼ã‚¿ã¨è¡¨ç¤ºã®ä¸æ•´åˆå•é¡Œï¼‰
- **Ver2**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ãƒ»å®‰å®šåŒ–
- **Ver3**: PLCæ¨™æº–æº–æ‹ ãƒ»æ•™è‚²åŠ¹æœæœ€å¤§åŒ–ï¼ˆç¾åœ¨ç‰ˆï¼‰

## å‹•ä½œç¢ºèªæ¸ˆã¿æ©Ÿèƒ½

### åŸºæœ¬å›è·¯
- âœ… å˜ç´”æ¥ç‚¹ãƒ»ã‚³ã‚¤ãƒ«å›è·¯
- âœ… è‡ªå·±ä¿æŒå›è·¯ï¼ˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹åˆ¶å¾¡ï¼‰
- âœ… ä¸¦åˆ—ãƒ»ç›´åˆ—æ¥ç¶šå›è·¯
- âœ… è¤‡é›‘åˆ†å²å›è·¯ï¼ˆLINK_BRANCHä½¿ç”¨ï¼‰

### é«˜åº¦æ©Ÿèƒ½
- âœ… ã‚¿ã‚¤ãƒãƒ¼åˆ¶å¾¡ï¼ˆ1ç§’ç²¾åº¦ï¼‰
- âœ… ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼åˆ¶å¾¡ï¼ˆç«‹ã¡ä¸ŠãŒã‚Šã‚¨ãƒƒã‚¸æ¤œå‡ºï¼‰
- âœ… RST/ZRSTå‘½ä»¤ï¼ˆå˜ä½“ãƒ»ç¯„å›²æŒ‡å®šï¼‰
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ã‚¹ã‚¿æ“ä½œï¼ˆ5ç¨®é¡ã®æ¼”ç®—ï¼‰

### ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½
- âœ… CSVä¿å­˜/èª­ã¿è¾¼ã¿ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åè‡ªå‹•ç®¡ç†ï¼‰
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å›è·¯è§£æ
- âœ… ãƒ‡ãƒã‚¤ã‚¹IDç·¨é›†ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… åŒä¸€ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç¶™ç¶šé–‹ç™ºä¸­ã§ã™ã€‚æ•™è‚²ç›®çš„ãƒ»ç ”ç©¶ç›®çš„ã§ã®ä½¿ç”¨ã‚’æ­“è¿ã—ã¾ã™ã€‚

---

**é–‹ç™ºçŠ¶æ³**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–é–‹ç™ºç¶™ç¶šä¸­  
**æœ€çµ‚æ›´æ–°**: 2025-08-19  
**å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼**: PLCã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€è‡ªå‹•åŒ–æŠ€è¡“å­¦ç¿’è€…ã€å·¥æ¥­æ•™è‚²é–¢ä¿‚è€…

**ğŸ¯ æ¬¡æœŸé–‹ç™ºè¨ˆç”»**: å¿œç”¨PLCæ©Ÿèƒ½ï¼ˆSET/RSTæ‹¡å¼µã€ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ã‚¹ã‚¿é«˜åº¦æ“ä½œã€è¤‡é›‘å›è·¯ãƒ‘ã‚¿ãƒ¼ãƒ³å¯¾å¿œï¼‰
**Raspberry Piã®GPIOåˆ¶å¾¡ã«ã‚ˆã‚‹ã€å®Ÿãƒ‡ãƒã‚¤ã‚¹åˆ¶å¾¡

---

<h2 id="en">PyPlc Ver3 - PLC Standard-Compliant Ladder Diagram Simulator</h2>
# English Version

# 

[![Version](https://img.shields.io/badge/Version-3.0-green)]() 
[![Python](https://img.shields.io/badge/Python-3.8+-blue)]() 
[![Pyxel](https://img.shields.io/badge/Pyxel-1.9.0+-red)]()
[![Quality](https://img.shields.io/badge/Code_Quality-A+-gold)]()

**ğŸŒ [æ—¥æœ¬èªç‰ˆ](#pyplc-ver3---plcæ¨™æº–æº–æ‹ ãƒ©ãƒ€ãƒ¼å›³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼) | English Version**

<img src="./GitResource/ScrnShot001.png">

## Overview

PyPlc Ver3 is a PLC standard-compliant ladder diagram simulator designed for both factory verification and educational purposes.
It provides an operational experience equivalent to actual PLC programming and fully implements basic functions including contacts, coils, timers, counters, and data registers.

**ğŸ† High-Quality Code**: Achieved A+ rating (commercial product level) from WindSurf AI Assistant

## Key Features

### âœ… Fully Implemented Functions
- **Basic Devices**: A/B contacts, normal/reverse coils, wiring systems (horizontal/vertical/branch)
- **Advanced Functions**: Timer (TON), Counter (CTU), RST/ZRST commands
- **Data Processing**: Data registers (MOV/ADD/SUB/MUL/DIV operations)
- **UI/UX**: Device palette, right-click editing, file save/load
- **Circuit Analysis**: Real-time power flow analysis, 30FPS high-speed operation
- **Educational Support**: PLC standard address system, same address highlighting

### ğŸ¯ Features
- **Full PLC Standard Compliance**: Address system and operation specifications based on Mitsubishi PLC
- **Educational Value**: Seamless transition to real PLCs
- **Commercial Quality**: High-quality architecture with WindSurf A+ rating
- **Modular Design**: Clean implementation based on separation of concerns
- **JSON-based Dialogs**: Advanced dialog system

## Installation & Execution

### System Requirements
- Python 3.8 or higher
- Pyxel 1.9.0 or higher
- Supported OS: Windows/Linux/macOS

### Installation
```bash
# Install dependencies
pip install pyxel

# Standard execution
pyxel run main.py
```

## Basic Operations

### Mode Switching
- **TAB**: EDIT/RUN mode switching
- **F5**: PLC execution start/stop (RUN mode only)
- **F6**: Full system reset
- **F12**: Application exit

### Device Placement & Editing
- **1-0 Keys**: Device selection (device palette)
- **Shift+Numbers**: Lower row device selection
- **Left Mouse Click**: Device placement/deletion
- **Right Mouse Click**: Device ID/settings editing
- **Drag**: Continuous placement of LINK_HORZ (horizontal wiring)

### File Operations
- **Ctrl+S**: Circuit save dialog
- **Ctrl+O**: Circuit load dialog
- **CSV Format**: Circuit data save/load

### Device Operations (RUN Mode)
- **Right Mouse Click**: Contact ON/OFF switching

## Device List

### Basic Devices (Upper Row: Normal Selection)
| Key | Device | Description | Notation |
|-----|--------|-------------|----------|
| 1 | A Contact | Normally Open Contact | -\|â”œ\|- |
| 2 | B Contact | Normally Closed Contact | -\|/\|- |
| 3 | Normal Coil | Output Coil | -( )- |
| 4 | Reverse Coil | Reverse Output Coil | -(/)- |
| 5 | Horizontal Wire | Horizontal Connection | â”€â”€â”€â”€ |
| 6 | Down Branch | Downward Branch | â”¬ |
| 7 | Up Branch | Upward Branch | â”´ |
| 8 | Vertical Wire | Vertical Connection | \| |
| 0 | Delete | Device Removal | ï¼ |

### Advanced Devices (Lower Row: Shift+Numbers)
| Key | Device | Description |
|-----|--------|-------------|
| Shift+1 | Timer | TON (On-Delay Timer) |
| Shift+2 | Counter | CTU (Up Counter) |
| Shift+3 | RST Command | Reset Command |
| Shift+4 | ZRST Command | Range Reset Command |
| Shift+5 | Data Register | Data Processing Device |

## PLC Standard Address System

### Input Devices (X)
- **Range**: X000-X377 (Octal)
- **Purpose**: Physical input devices (switches, sensors, etc.)

### Output Devices (Y)
- **Range**: Y000-Y377 (Octal)
- **Purpose**: Physical output devices (lamps, relays, etc.)

### Internal Relays (M)
- **Range**: M0-M7999 (Decimal)
- **Purpose**: Auxiliary relays used internally in programs

### Timers (T)
- **Range**: T000-T255 (Decimal)
- **Preset Value**: 0-32767 (0.1 second units)
- **Operation**: TON (On-Delay Timer)

### Counters (C)
- **Range**: C000-C255 (Decimal)
- **Preset Value**: 0-65535 (counts)
- **Operation**: CTU (Up Counter)

### Data Registers (D)
- **Range**: D0-D7999 (Decimal)
- **Operations**: MOV/ADD/SUB/MUL/DIV
- **Purpose**: Numerical data storage and arithmetic

## Technical Specifications

### Display & Performance
- **Resolution**: 384Ã—384 pixels
- **Grid System**: 15 rows Ã— 20 columns
- **Frame Rate**: 30FPS stable operation
- **Circuit Analysis**: Depth-first search algorithm

### Architecture
- **Design Philosophy**: Modularization, separation of concerns
- **Code Quality**: WindSurf A+ rating (commercial product level)
- **Maintainability**: Easily extensible design, comprehensive comments
- **Compatibility**: PLC standard compliance, real device migration support

### Dialog System
- **JSON-based**: Configurable dialog layouts
- **Validation**: Real-time input validation
- **File Operations**: Advanced file save/load functionality

## Project Structure

```
PyPlc/
â”œâ”€â”€ main.py                      # Main application
â”œâ”€â”€ config.py                    # Configuration constants (device types, UI settings, etc.)
â”œâ”€â”€ core/                        # Core modules
â”‚   â”œâ”€â”€ circuit_analyzer.py      # Circuit analysis engine
â”‚   â”œâ”€â”€ grid_system.py           # Grid management & device rendering
â”‚   â”œâ”€â”€ device_base.py           # PLC device base class
â”‚   â”œâ”€â”€ device_palette.py        # Device selection palette
â”‚   â”œâ”€â”€ input_handler.py         # Mouse & keyboard input processing
â”‚   â”œâ”€â”€ circuit_csv_manager.py   # CSV save/load functionality
â”‚   â””â”€â”€ SpriteManager.py         # Sprite management system
â”œâ”€â”€ pyDialogManager/             # Advanced dialog system
â”‚   â”œâ”€â”€ dialog_manager.py        # Dialog integration management
â”‚   â”œâ”€â”€ dialog_system.py         # Dialog system core
â”‚   â”œâ”€â”€ widgets.py               # Basic UI widgets
â”‚   â”œâ”€â”€ file_open_dialog.py      # File open dialog
â”‚   â”œâ”€â”€ file_save_dialog.py      # File save dialog
â”‚   â”œâ”€â”€ device_id_dialog_controller.py  # Device ID editing
â”‚   â”œâ”€â”€ timer_counter_dialog_controller.py  # Timer/Counter settings
â”‚   â”œâ”€â”€ data_register_dialog_controller.py  # Data register settings
â”‚   â””â”€â”€ dialogs.json             # Dialog definition file
â”œâ”€â”€ sprites.json                 # Sprite definitions
â”œâ”€â”€ my_resource.pyxres           # Pyxel resource file

# pyDialogManager has become an independent repository as a derivative project
https://github.com/Edo-Hachi/pyDialogManager
```

## Development History & Achievements

### Ver3 Major Achievements (2025)
- **Phase 1-5**: Basic system to dialog refactoring completed
- **Architecture**: Separation of concerns design, modularization, high-quality code realization
- **PLC Compliance**: Based on Mitsubishi GxWorks for educational use
- **Educational Value**: Aiming for complete compatibility with practical PLCs
- **Technical Innovation**: LINK_BRANCH vertical connection system (reduced from 125 to 15 lines)

### Quality Assurance
- **Code Review**: WindSurf, Cursor, ClaudeCode, GeminiCLI evaluations
- **Design Quality**: "Commercial product level completion" evaluation
- **Performance**: 0.11ms average execution time (300x faster than 30FPS requirement)
- **Educational Effect**: "Pure implementation compliant with real PLCs" evaluation

### Evolution from Ver1/Ver2
- **Ver1**: Prototype (internal data and display inconsistency issues)
- **Ver2**: Modularization and stabilization
- **Ver3**: PLC standard compliance and educational effectiveness maximization (current version)

## Verified Functions

### Basic Circuits
- âœ… Simple contact/coil circuits
- âœ… Self-holding circuits (sequence control)
- âœ… Parallel/series connection circuits
- âœ… Complex branch circuits (using LINK_BRANCH)

### Advanced Functions
- âœ… Timer control (1-second precision)
- âœ… Counter control (rising edge detection)
- âœ… RST/ZRST commands (single/range specification)
- âœ… Data register operations (5 types of arithmetic)

### System Functions
- âœ… CSV save/load (automatic filename management)
- âœ… Real-time circuit analysis
- âœ… Device ID editing & validation
- âœ… Same address highlighting display

## License

This project is under continuous development. Educational and research purposes are welcome.

---

**Development Status**: Active development ongoing  
**Last Updated**: August 19, 2025  
**Target Users**: PLC engineers, automation technology learners, industrial education professionals

**ğŸ¯ Future Development Plans**: Advanced PLC functions (SET/RST extensions, advanced data register operations, complex circuit pattern support)
**Real device control via Raspberry Pi GPIO control
